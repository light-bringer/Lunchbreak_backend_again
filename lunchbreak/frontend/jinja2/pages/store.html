{% extends 'base.html' %}

{% block content %}
<div id="store-banner" class="block banner small">
    <div class="container">
        <div class="bottom">
            <h1>{{ store.name }}</h1>
            <ul>
                <li>
                    {{ store.street }} {{ store.number }}
                </li>
                {% set openingperiods = store.openingperiods_today %}
                <li class="openingperiods">
                {% if openingperiods %}
                    {% for openingperiod in openingperiods -%}
                        {% if not loop.first -%}
                            ,
                        {%- endif %}
                        {{ openingperiod.start.time() }} - {{ openingperiod.end.time() }}
                    {%- endfor %}
                {% else %}
                    Vandaag gesloten
                {% endif %}
                </li>
            </ul>
        </div>
    </div>
</div>

{% set menus = store.menus.all().prefetch_related(
    'food__ingredients',
    'food__ingredientgroups',
).order_by(
    '-priority',
    'name'
) %}

<div class="tab-container">
    <div class="container">
        <ul>
            {% for menu in menus %}
                {% if menu.food.all() %}
                    {% if loop.first %}
                        <li class="selected">{{ menu.name }}</li>
                    {% else %}
                        <li>{{ menu.name }}</li>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </ul>
    </div>
</div>

<div id="inventory" class="block">
    <div class="container">
        <div id="menus">
            <input id="menu-search" type="text" placeholder="Zoeken op naam"/>
            {% for menu in menus %}
                {% if menu.food.all() %}
                <div class="menu">
                    <h3>{{ menu.name }}</h3>
                    {% for food in menu.food.all() %}
                        <div class="food" data-id="{{ food.id }}" data-has-ingredients="{{ food.has_ingredients }}">
                            <div class="food-top">
                                <div class="food-text">
                                    <h4>{{ food.name }}</h4>
                                    <p>{{ food.description }}</p>
                                </div>

                                <div class="food-add">
                                    <span class="button transparent" href="" alt="Toevoegen">&euro; {{ food.cost | replace('.', ',') }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                {% endif %}
            {% endfor %}
        </div>
        <div id="order">
            <form method="POST" action="{{ url('frontend-order', kwargs={'store_id': store.id}) }}">
                <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}"/>
                <input type="submit" value="Afrekenen" disabled/>
                {% include 'includes/orderedfood.html' %}
            </form>
        </div>
    </div>
</div>

<div id="snackbar" class="mdl-js-snackbar mdl-snackbar">
    <div class="mdl-snackbar__text"></div>
    <button class="mdl-snackbar__action" type="button"></button>
</div>

{% include 'includes/header.html' %}
{% include 'includes/footer.html' %}

<script src="{{ static('nunjucks.min.js') }}" type="text/javascript"></script>
<script src="{{ static('holmes.js') }}" type="text/javascript"></script>
<script src="{{ static('mdlComponentHandler.js') }}" type="text/javascript"></script>
<script src="{{ static('checkbox/checkbox.js') }}" type="text/javascript"></script>
<script src="{{ static('snackbar/snackbar.js') }}" type="text/javascript"></script>
<script src="{{ static('textfield/textfield.js') }}" type="text/javascript"></script>
<script src="{{ static('rounding.js') }}" type="text/javascript"></script>
<script src="{{ static('store.js') }}" type="text/javascript"></script>


{% endblock content %}
