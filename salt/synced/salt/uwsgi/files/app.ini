[uwsgi]
socket = /var/sockets/{{ host }}.sock
chmod-socket = 664

uid = www-data
gid = www-data
chdir = {{ chdir }}
wsgi-file = Lunchbreak/wsgi.py

enable-threads = true

daemonize = /var/log/uwsgi/{{ host }}.log
pidfile = /tmp/{{ host }}.pid
hakiri = 20  # Respawn processes taking more than 20 seconds

vacuum = true
virtualenv = {{ virtualenv }}
pp = {{ virtualenv }}/lib/python2.7/site-packages
thunder-lock = true

env = DJANGO_SETTINGS_BRANCH={{ branch }}
env = DJANGO_SETTINGS_MODULE=Lunchbreak.settings
env = {{ password_var }}={{ password }}
env = BUSINESS_APNS_CERTIFICATE={{ business_apns_certificate }}
env = CUSTOMERS_APNS_CERTIFICATE={{ customers_apns_certificate }}
env = OPBEAT_ORGANIZATION_ID={{ opbeat_organization_id }}
env = OPBEAT_APP_ID={{ opbeat_app_id }}
env = OPBEAT_SECRET_TOKEN={{ opbeat_secret_token }}
env = SENDGRID_USER={{ sendgrid_user }}
env = SENDGRID_PASSWORD={{ sendgrid_password }}
env = GOOGLE_CLOUD_SECRET={{ google_cloud_secret }}
